@model MotorsHut.Models.Admin.CarsListViewModel
@{
    ViewData["Title"] = "Cars";
    Layout = "_AdminLayout";
}

<article class="admin-panel mb-3">
    <div class="d-flex flex-wrap justify-content-between align-items-center gap-2">
        <form method="get" asp-controller="Admin" asp-action="Cars" class="d-flex gap-2 flex-grow-1">
            <input type="text"
                   class="form-control"
                   name="search"
                   value="@Model.Search"
                   placeholder="Search by make, model, variant, color, VIN" />
            <button type="submit" class="btn btn-outline-primary">Search</button>
            <a asp-controller="Admin" asp-action="Cars" class="btn btn-outline-secondary">Clear</a>
        </form>
        <a asp-controller="Admin" asp-action="AddCar" class="btn btn-primary">Add New</a>
    </div>
</article>

<article class="admin-panel">
    <h3 class="mb-3">Cars List</h3>

    @if (Model.Cars.Count == 0)
    {
        <p class="text-muted mb-0">No cars found.</p>
    }
    else
    {
        <div class="table-responsive">
            <table class="table table-striped align-middle">
                <thead>
                    <tr>
                        <th>Car</th>
                        <th>Year</th>
                        <th>Price</th>
                        <th>Mileage</th>
                        <th>Status</th>
                        <th></th>
                    </tr>
                </thead>
                <tbody>
                    @foreach (var car in Model.Cars)
                    {
                        <tr>
                            <td>
                                <strong>@car.Make @car.Model</strong>
                                @if (!string.IsNullOrWhiteSpace(car.Variant))
                                {
                                    <div class="text-muted small">@car.Variant</div>
                                }
                            </td>
                            <td>@car.Year</td>
                            <td>$@car.Price.ToString("N2")</td>
                            <td>@car.MileageKm.ToString("N0") km</td>
                            <td>
                                @if (car.IsSold)
                                {
                                    <span class="badge text-bg-success">Sold</span>
                                }
                                else
                                {
                                    <span class="badge text-bg-primary">In Stock</span>
                                }

                                @if (car.IsReturned)
                                {
                                    <span class="badge text-bg-warning">Returned</span>
                                }
                            </td>
                            <td class="text-end">
                                <a asp-controller="Admin"
                                   asp-action="EditCar"
                                   asp-route-id="@car.Id"
                                   class="btn btn-sm btn-outline-dark">
                                    Edit
                                </a>
                            </td>
                        </tr>
                    }
                </tbody>
            </table>
        </div>
    }
</article>
